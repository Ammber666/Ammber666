3.1.3 财务数据处理  财务数据就是与公司财务有关的数据,反映企业一定期间的经营成果和财务 状况变动。交易所为了保护投资者的权益,要求上市公司定期公布财务报告,以 便投资者了解其经营及财务状况。财务数据比量价数据复杂得多,因此下面会花 较多笔墨介绍。  1. 报告期
对A股市场,《会计法》规定会计年度从1月1日开始,12月31日结束。一般要 求上市企业一年定期披露四次财报,分别是一季报、半年报、三季报、年报[4]。财 务报告在披露日期上没有严格要求,只要在规定的截止日之前披露即可。每个报 告期都有一个标识,一般用“年份+季度末”的格式表示,如2018年三季报  用“20180930”标识,2018年年报用“20181231”标识,具体定义见表3.2。  表3.2 财务报告期  2. 财务报表  财务报告主要由财务报表构成,财务报表包括“四表一附注”,即资产负债 表、利润表、现金流量表、所有者权益变动表和附注,具体定义和特点见表  3.3。[5]  表3.3 四表一附注  3. 基准报告期  在披露最新报告期财务报表时,会同时披露对应的某个历史基准报表。不同 报表对应的基准报表不同,资产负债表对应上年年报。以白云机场为例,图3.3显 示白云机场在披露2018年三季报时,会同时披露年初余额(2017年年报)。另一 方面,利润表和现金流量表对应为上年同期值。图3.4展示了白云机场在披露2018 年三季报现金流量表时,会同时披露上年同比报告期(2017年三季报)。
图3.3 白云机场2018年三季报资产负债表(部分)  无论一季报、半年报、三季报还是年报,在每期资产负债表披露时,其对应 的基准报表都为上年年报;而现金流量表和利润表,其对应的基准报表总为对应 的同比报告期,对应关系见表3.4。表3.5给出了一个示例。  图3.4 白云机场2018年三季报现金流量表(部分)  表3.4 基准报告期  表3.5 基准报告期示例  4. 调整和更正  财务报表披露后,由于某些原因可能会进行一些修正,更改原始的科目数 值。修正按照时间频率分为两种,一种是调整,另一种是不定期更正。财务报表
第一次披露时的值称为原始报表;在后续定期报告中再次披露基准报表时,如果 基准报表和原始报表科目数值出现了不同,则发生了调整。以中铁工业 (600528.SH)为例,它于2017年3月31日首次公布了2016年年报(原始报表), 如图3.5所示;于2018年3月28日公布2017年年报时同时披露了2016年年报(基准 报表),如图3.6所示。图3.5期末余额对应2016年原始报表,图3.6期初余额对应 2016年基准报表。比较2016年的原始和基准报表可知,货币资金、应收票据、应 收账款和预付款项均进行了调整。  图3.5 2016年中铁工业合并资产负债表(部分)  图3.6 2017年中铁工业合并资产负债表(部分)  不定期更正指的是,由于会计政策变更或者会计统计差错等原因,对之前某 期的报告进行更正。更正需要发更正公告,没有明确的时间规律。以柳工  (000528.SZ)为例,它先在2018年8月30日披露了2018年半年报,而后又在2018 年9月29日对半年报进行了更正。表3.6展示了利润表部分科目更正前和更正后的 数值。  5. 基本原则  在进行财务数据的研究时,调整和更正的存在会增加数据处理的复杂度。一 个处理方式是,不考虑调整和修正,只使用第一次披露的数值。这种方式简单易
实现,不会引入未来数据;但其缺点是无法反映调整或更正的新信息,信息利用 不充分。另外一种方法是始终采用调整后和修正后的最新数据,这种方式也简化 了计算过程,缺点是在历史回溯时会利用未来数据,导致结果偏差较大。这两种 方式为了追求简单而牺牲了精确性,因而并不推荐。实证资产定价研究和因子投 资是非常精细的过程,因而需要遵循以下原则:在当前时点利用可得的最新信息 (即point-in-time原则)。按照这个原则,既能保证充分利用最新的数据,例如考 虑调整和更正,或者将业绩预告和业绩快报考虑进来,也可以避免使用未来数 据。  表3.6 柳工2018年半年报利润表更正(元)  6. 数据存储  无论是Wind还是Tushare,三大表在处理调整和更正时都采用相同的步骤。以 大智慧(601519.SH)2014年年报合并资产负债表为例,表3.7记录了其首次披 露、调整和更正过程。这个例子表明底层表中同一个报告期可能会有多条记录, 分属于以下四类:类型1—初始报表(最新值)、类型2—基准报表(最新值)、 类型3—初始报表(原始值)和类型4—基准报表(原始值)。这四种类型与Wind 和Tushare的对应关系如表3.8所示。  表3.7 大智慧2014年合并报表的调整和更正  需要注意的是:(1)如果没有任何一个会计科目发生调整,则初始报表和基 准报表记录相同;(2)由于对上市公司财务报表披露规范的指定,1998年之前的 数据没有调整和更正,每个报告期只有一条记录;(3)如果更正发生在基准报告 之前,则只有三条记录:初始报表(最新值)、初始报表(原始值)和基准报表 (最新值);(4)如果更正发生在基准报告之后,则会有表3.8所示的全部四条 记录。  表3.8 合并报表在底层表中的四种记录类型
7. 如何使用  为了说明如何正确使用数据,图3.7展示了几种常见的情况。  第一种情况如图3.7(a)所示,x年年报在t1日披露后没有发生调整和更正, 此时只有1条数据即类型1。t1日后如果要使用该财报数据,则提取类型1即可。  第二种情况如图3.7(b)所示,x年年报在t1日首次披露,在t2日x+1年年报披 露时顺便再一次披露了x年年报(基准报表)。因此,若在t1日到t2日之间使用该财 报数据,则应提取类型1;若在t2日后使用该数据,则提取类型2。  图3.7(c)展示了第三种情况,即除了常规的初始报表和基准报表,还发生了 数据更正,且更正发生在基准报表之前[6]。在t1日披露x年年报,此时记录为类型 1;在t2日对年报进行了更正,此时更正后的数据记为类型1,更正前的数据记为类 型3;在t3日披露调整数据,此时记录为类型2。因此,如果在t1日到t2日使用x年年 报,应提取类型3;若在t2日到t3日之间使用该数据,则提取类型1;若在t3日之 后,提取类型2即可。  图3.7 调整和更正示例
最后一种情况见图3.7(d),即更正发生在基准报表之后。在t1日披露x年年 报,此时记为类型1;在t2日披露x年年报基准报表,记为类型2;t3日发出x年年报 更正公告,此时修改类型1和类型2为更正后的最新值,原来的数据分别记为类型3 和类型4。因此,如果在t1日到t2日期间使用该年报,则应提取类型3;如果在t2日 到t3日之间使用该数据,则提取类型4;在t3日之后提取类型2即可。  8. 单季度数据  每年12个月可以分为四个季度,每个季度包含三个月份,单季度数据对每个 季度作单独衡量。由于资产负债表是一个时点数据,因此单季度数据和对应的报 告期数据相同;对于利润表和现金流量表,一季度数据和一季报相同,其余三个 季度数据等于对应报告期数据减去环比报告期数据。如果环比报告期缺失,则无 法计算单季度数据,单季度数据为空。具体对应关系见表3.9,计算流程图见图  3.8。  表3.9 单季度数据计算  图3.8 单季度数据计算流程图  9. TTM数据  TTM是Trailing Twelve Months首字母的缩写,即滚动12个月数据,以消除季节 性差异使得横向可比,具体计算流程见图3.9。在计算过程中,值得一提的是对资 产负债表科目的处理方法。由于资产负债表是时点数据,如果要计算其科目的 TTM数据,那么有三种常见的算法:(1)当前最新数据;(2)最近四个报告期
平均值;(3)当前最新报告期和其同比报告期的平均值。对于利润表和现金流量 表来说,如果最新报告期为年报,则TTM数据即为年报数据;如果是其他报告 期,则TTM数据等于当前最新报告期数据,加上上年年报数据,再减去上年同比 报告期数据;如果上年年报或同比报告期不存在,则可以使用年化算法,即当前 最新报告期